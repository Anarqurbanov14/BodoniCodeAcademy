
@model Shop_VM
@{
    ViewData["Title"] = "Index";
}


<div class="stores__home">
    <a asp-controller="Home" asp-action="Index"> Home /</a>
    <a asp-controller="Shop" asp-action="Index">Shop</a>
</div>
<div class="shop__menu">
    <div class="container">
        <div class="shop__menu__wrapper">
            <div class="shop__box1">
                <div class="sideBarItem">
                    <div><b>CATEGORIES</b></div>
                    @foreach (var categoryItem in ViewBag.Categories)
                    {
                        <div class="sideBarForm">
                            <input form="filterForm" class="catInp" type="checkbox" name="propertyItemId" id="@categoryItem.Id" value="@categoryItem.Id" @(ViewBag.CategoryId==categoryItem.Id?"checked":"") />
                            <label for="categoryItem-@categoryItem.Id">@categoryItem.Name</label>
                        </div>
                    }
                </div>
                <hr />
                <div class="sideBarItem">
                    <div><b>PROPERTY</b></div>
                    @foreach (var propertyItem in ViewBag.Properties)
                    {
                        <div class="sideBarForm">
                            <input form="filterForm" class="propInp" type="checkbox" name="propertyItemId" id="@propertyItem.Id" value="@propertyItem.Id" @(ViewBag.PropertyId==propertyItem.Id?"checked":"") />
                            <label for="propertyItem-@propertyItem.Id">@propertyItem.Name</label>
                        </div>
                    }
                </div>
                <hr />
                <div class="sideBarItem">
                    <div><b>BRAND</b></div>
                    @foreach (var brandItem in ViewBag.Brands)
                    {
                        <div class="sideBarForm">
                            <input form="filterForm" class="brandInp" type="checkbox" name="brandItemId" id="@brandItem.Id" value="@brandItem.Id" @(ViewBag.BrandId==brandItem.Id?"checked":"") />
                            <label for="brandItem-@brandItem.Id">@brandItem.Name</label>
                        </div>
                    }

                </div>
                <hr />
                <div class="sideBarItem">
                    <div><b>COLOR</b></div>
                    @foreach (var colorItem in ViewBag.Colors)
                    {
                        <div class="sideBarForm">
                            <input form="filterForm" class="colorInp" type="checkbox" name="colorItemId" id="@colorItem.Id" value="@colorItem.Id" @(ViewBag.ColorIds.Contains(colorItem.Id)?"checked":"") />
                            <label for="colorItem-@colorItem.Id">@colorItem.Name</label>
                        </div>
                    }
                </div>
            </div>

            <div>
                <div class="shop__menu__wrapper__wines">
                    @foreach (var wineItem in Model.Wine)
                    {
                        <div class="shop__menu__wrapper__wines__item">
                            <a asp-controller="Wine" asp-action="Detail" asp-route-id="@wineItem.Id">
                                <img src="~/uploads/wineImages/@wineItem.Image" alt="wineImage" />
                                <div class="title title_fz11px title_fz11px_c">@wineItem.Category.Name</div>
                                <div class="title title_fz18px">@wineItem.Name</div>
                                <div class="title title_fz18px">$<b>@wineItem.SalePrice</b></div>
                            </a>
                        </div>
                    }
                </div>
            </div>

        </div>
    </div>
</div>




    <script>
        let catInps = document.querySelectorAll('.catInp');
        let propInps = document.querySelectorAll('.propInp');
        let brandInps = document.querySelectorAll('.brandInp');
        let colorInps = document.querySelectorAll('.colorInp');
        let categories = [];
        let properties = [];
        let brands = [];
        let colors = [];
        console.log("ahaha")
        [...catInps].forEach(ci => {
            ci.addEventListener('change', () => {
                categories.push(ci.value);
                console.log("ahaah")
            //getProducts()
            })
        })
        [...propInps].forEach(pi => {
            pi.addEventListener('change', () => {
            properties.push(pi.value);
            //getProducts()
            })
        })
        [...brandInps].forEach(bi => {
            bi.addEventListener('change', () => {
            brands.push(bi.value);
            //getProducts()
            })
        })
        [...colorInps].forEach(ci => {
            ci.addEventListener('change', () => {
            colors.push(ci.value);
            //getProducts()
            })
        })

        //function getProducts(){
        //    console.log('ahaah')
        //    fetch('shop/Filter?categories=' + categories + '&properties=' + properties + '&brands=' + brands + '$colorIds' + colors)
        //    .then(res => {
        //        return res.text()
        //    }).then(data => {
                    
        //    })
        //}

                
        
    </script>
